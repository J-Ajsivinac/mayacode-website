---
import { Icon } from "astro-icon/components";
import Button from "../components/ui/Button.astro";

interface HeroContent {
    extra: string;
    title: string;
    description: string;
    buttons?: {
        text: string;
        link: string;
        variant?: "primary" | "secondary" | "ghostLight" | "ghostDark";
        target?: string;
    }[];
    backgroundImage?: string | any;
    overlayOpacity?: number;
}

interface Props {
    content: HeroContent;
}

const navItems = [
    { name: "Inicio", href: "#inicio" },
    { name: "Nosotros", href: "#nosotros" },
    { name: "Productos", href: "#productos" },
    { name: "Testimonios", href: "#testimonios" },
    { name: "Contacto", href: "#contacto" },
];
---

<nav
    id="navbar"
    class="bg-white text-white px-6 md:px-16 py-5 flex items-center justify-between fixed top-0 left-0 right-0 z-50 transition-transform duration-500 ease-in-out"
>
    <a class="flex items-center gap-2" href="/mayacode-website">
        <Icon name="LineMdCoffee" class="text-4xl text-primary" />
        <span class="font-bold text-primary uppercase font-logo text-2xl">
            MayaCode
        </span>
    </a>

    <div class="md:hidden">
        <button
            id="menu-btn"
            class="text-3xl text-accent transition-transform duration-300 active:scale-90"
            aria-label="Abrir menú"
        >
            ☰
        </button>
    </div>

    <ul
        id="menu"
        class="hidden md:flex gap-8 md:gap-14 flex-col md:flex-row absolute md:static top-full left-0 w-full md:w-auto bg-white md:bg-transparent p-6 md:p-0 shadow-md md:shadow-none transform md:transform-none scale-y-0 md:scale-y-100 origin-top transition-transform duration-500 ease-in-out z-50"
    >
        {
            navItems.map((item, index) => (
                <li
                    class="opacity-0 md:opacity-100 translate-y-2 md:translate-y-0 transition-all duration-500 ease-in-out"
                    style={`transition-delay: ${index * 100}ms`}
                >
                    <a
                        href={item.href}
                        class="block text-[#1b1b1b] hover:text-accent transition-colors duration-300 text-[15px] font-medium"
                        onclick="if(window.innerWidth < 768) this.closest('nav').querySelector('#menu-btn').click()"
                    >
                        {item.name}
                    </a>
                </li>
            ))
        }
        <li
            class="md:hidden mt-4 opacity-0 translate-y-2 transition-all duration-500 ease-in-out delay-300"
        >
            <Button
                href={`${import.meta.env.BASE_URL}/cart`}
                target={"_self"}
                variant={"primary"}
                class="w-full"
            >
                <i class="fas fa-shopping-cart mr-2"></i> Carrito
            </Button>
        </li>
    </ul>

    <div class="hidden md:block">
        <Button href={`${import.meta.env.BASE_URL}/cart`} target={"_self"} variant={"primary"}>
            <i class="fas fa-shopping-cart mr-2"></i> Carrito
        </Button>
    </div>
</nav>

<script>
    import { initNavbar } from "../scripts/navbar.js";

    document.addEventListener("astro:page-load", initNavbar);
</script>
